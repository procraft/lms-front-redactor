import React, { useEffect, useMemo, useState } from 'react'
import { SvgIcon } from '../../../../SvgIcon'
import { AddWidgetModalButtonStyled } from '../../styles'
import { AddWidgetButtonButtonProps } from '../interfaces'

export const AddContentEditorWidgetButton: React.FC<AddWidgetButtonButtonProps> =
  ({ closeHandler, object, updateObject, ...other }) => {
    const buttonState = useState<HTMLButtonElement | null>(null)

    useEffect(() => {
      if (!buttonState[0]) {
        return
      }

      const button = buttonState[0]

      const onClick = () => {
        //

        updateObject(object, {
          components: [
            {
              name: 'ContentEditor',
              component: 'ContentEditor',
              props: {},
              components: [
                {
                  name: 'HtmlTag',
                  component: 'HtmlTag',
                  props: {
                    tag: 'h1',
                  },
                  components: [
                    {
                      name: 'HtmlTag',
                      component: 'HtmlTag',
                      props: {
                        text: 'Heading',
                      },
                      components: [],
                    },
                  ],
                },
                {
                  name: 'HtmlTag',
                  component: 'HtmlTag',
                  props: {
                    tag: 'p',
                  },
                  components: [
                    {
                      name: 'HtmlTag',
                      component: 'HtmlTag',
                      props: {
                        text: 'Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.',
                      },
                      components: [],
                    },
                  ],
                },
              ],
            },
          ],
        })

        closeHandler()
      }

      button.addEventListener('click', onClick)

      return () => {
        button.removeEventListener('click', onClick)
      }
    }, [buttonState, object, updateObject, closeHandler])

    return useMemo(() => {
      return (
        <>
          <AddWidgetModalButtonStyled ref={buttonState[1]} {...other}>
            <SvgIcon>
              <path
                d="M26.0928 55.7646H22.6816V65H21.8408V55.7646H18.4365V55.0469H26.0928V55.7646ZM29.6953 65.1367C29.0664 65.1367 28.4967 64.9818 27.9863 64.6719C27.4805 64.362 27.0863 63.9313 26.8037 63.3799C26.5212 62.8239 26.3799 62.2018 26.3799 61.5137V61.2197C26.3799 60.5088 26.5166 59.8685 26.79 59.2988C27.068 58.7292 27.4531 58.2826 27.9453 57.959C28.4375 57.6309 28.9707 57.4668 29.5449 57.4668C30.4427 57.4668 31.1536 57.7744 31.6777 58.3896C32.2064 59.0003 32.4707 59.8366 32.4707 60.8984V61.3564H27.1934V61.5137C27.1934 62.3522 27.4326 63.0518 27.9111 63.6123C28.3942 64.1683 29.0003 64.4463 29.7295 64.4463C30.167 64.4463 30.5521 64.3665 30.8848 64.207C31.222 64.0475 31.5273 63.7923 31.8008 63.4414L32.3135 63.8311C31.7119 64.7015 30.8392 65.1367 29.6953 65.1367ZM29.5449 58.1641C28.9297 58.1641 28.4102 58.3896 27.9863 58.8408C27.5671 59.292 27.3118 59.8981 27.2207 60.6592H31.6572V60.5703C31.6344 59.8594 31.4316 59.2806 31.0488 58.834C30.666 58.3874 30.1647 58.1641 29.5449 58.1641ZM36.0732 61.6094H34.9385V65H34.1113V57.6035H34.9385V60.8848H36.0596L38.7734 57.6035H39.8057L36.7705 61.1924L40.1406 65H39.0605L36.0732 61.6094ZM43.9482 64.4463C44.5179 64.4463 44.9941 64.2868 45.377 63.9678C45.7643 63.6442 45.974 63.2272 46.0059 62.7168H46.792C46.7692 63.168 46.6279 63.5804 46.3682 63.9541C46.1084 64.3232 45.762 64.6126 45.3291 64.8223C44.9007 65.0319 44.4404 65.1367 43.9482 65.1367C42.9775 65.1367 42.2074 64.7995 41.6377 64.125C41.0726 63.4505 40.79 62.5436 40.79 61.4043V61.1582C40.79 60.429 40.9176 59.7842 41.1729 59.2236C41.4281 58.6631 41.7926 58.2301 42.2666 57.9248C42.7451 57.6195 43.3034 57.4668 43.9414 57.4668C44.7526 57.4668 45.4202 57.7083 45.9443 58.1914C46.473 58.6745 46.7555 59.3102 46.792 60.0986H46.0059C45.9694 59.5199 45.7598 59.0527 45.377 58.6973C44.9987 58.3418 44.5202 58.1641 43.9414 58.1641C43.2031 58.1641 42.6289 58.4307 42.2188 58.9639C41.8132 59.4971 41.6104 60.2445 41.6104 61.2061V61.4453C41.6104 62.3887 41.8132 63.1247 42.2188 63.6533C42.6289 64.182 43.2054 64.4463 43.9482 64.4463ZM53.7441 58.3008H51.0508V65H50.2305V58.3008H47.6396V57.6035H53.7441V58.3008ZM54.3525 61.1924C54.3525 60.4814 54.4893 59.8411 54.7627 59.2715C55.0407 58.7018 55.4303 58.2598 55.9316 57.9453C56.4375 57.6263 57.0094 57.4668 57.6475 57.4668C58.6318 57.4668 59.4294 57.8132 60.04 58.5059C60.6507 59.194 60.9561 60.1077 60.9561 61.2471V61.418C60.9561 62.1335 60.8171 62.7783 60.5391 63.3525C60.2656 63.9222 59.8783 64.362 59.377 64.6719C58.8757 64.9818 58.3037 65.1367 57.6611 65.1367C56.6813 65.1367 55.8838 64.7926 55.2686 64.1045C54.6579 63.4118 54.3525 62.4958 54.3525 61.3564V61.1924ZM55.1729 61.418C55.1729 62.3021 55.4007 63.029 55.8564 63.5986C56.3167 64.1637 56.9183 64.4463 57.6611 64.4463C58.3994 64.4463 58.9964 64.1637 59.4521 63.5986C59.9124 63.029 60.1426 62.2793 60.1426 61.3496V61.1924C60.1426 60.6273 60.0378 60.11 59.8281 59.6406C59.6185 59.1712 59.3245 58.8089 58.9463 58.5537C58.568 58.2939 58.1351 58.1641 57.6475 58.1641C56.9183 58.1641 56.3236 58.4512 55.8633 59.0254C55.403 59.5951 55.1729 60.3424 55.1729 61.2676V61.418ZM62.7402 65V57.6035H65.4541C66.3929 57.6035 67.113 57.7721 67.6143 58.1094C68.1156 58.4421 68.3662 58.932 68.3662 59.5791C68.3662 59.9482 68.2546 60.2786 68.0312 60.5703C67.8079 60.8574 67.4821 61.0671 67.0537 61.1992C67.5368 61.2904 67.9242 61.4977 68.2158 61.8213C68.512 62.1449 68.6602 62.5208 68.6602 62.9492C68.6602 63.6009 68.4186 64.1068 67.9355 64.4668C67.457 64.8223 66.778 65 65.8984 65H62.7402ZM63.5537 61.5957V64.3164H65.9258C66.541 64.3164 67.015 64.1979 67.3477 63.9609C67.6803 63.724 67.8467 63.3822 67.8467 62.9355C67.8467 62.5254 67.6803 62.1995 67.3477 61.958C67.015 61.7165 66.541 61.5957 65.9258 61.5957H63.5537ZM63.5537 60.9121H65.625C66.9102 60.8939 67.5527 60.4564 67.5527 59.5996C67.5527 59.1484 67.375 58.8203 67.0195 58.6152C66.6686 58.4056 66.1468 58.3008 65.4541 58.3008H63.5537V60.9121ZM71.3877 60.29H73.5205C74.0674 60.29 74.5459 60.3903 74.9561 60.5908C75.3708 60.7868 75.6829 61.0602 75.8926 61.4111C76.1068 61.762 76.2139 62.1699 76.2139 62.6348C76.2139 63.3503 75.9678 63.9245 75.4756 64.3574C74.988 64.7858 74.3271 65 73.4932 65H70.5742V57.6035H71.3877V60.29ZM71.3877 60.9873V64.3096H73.5068C74.0947 64.3096 74.555 64.1615 74.8877 63.8652C75.2249 63.569 75.3936 63.1634 75.3936 62.6484C75.3936 62.1562 75.2295 61.7598 74.9014 61.459C74.5778 61.1536 74.1335 60.9964 73.5684 60.9873H71.3877ZM78.7227 65H77.9023V57.6035H78.7227V65ZM85.8594 57.6035H86.6797V65H85.8594V58.9229L81.8672 65H81.0537V57.6035H81.8672V63.6875L85.8594 57.6035ZM85.8184 54.9375C85.8184 55.4616 85.6383 55.8854 85.2783 56.209C84.9229 56.5326 84.4443 56.6943 83.8428 56.6943C83.2503 56.6943 82.7718 56.5348 82.4072 56.2158C82.0472 55.8923 81.8672 55.4661 81.8672 54.9375H82.5645C82.5645 55.3158 82.6761 55.6051 82.8994 55.8057C83.1273 56.0062 83.4417 56.1064 83.8428 56.1064C84.2438 56.1064 84.556 56.0016 84.7793 55.792C85.0072 55.5824 85.1211 55.2975 85.1211 54.9375H85.8184ZM95.2588 58.0957C96.1976 58.0957 96.9587 58.4033 97.542 59.0186C98.1253 59.6292 98.417 60.4404 98.417 61.4521V61.6299C98.417 62.2998 98.2826 62.9036 98.0137 63.4414C97.7493 63.9746 97.3665 64.3916 96.8652 64.6924C96.3685 64.9886 95.7965 65.1367 95.1494 65.1367C94.1742 65.1367 93.3835 64.8132 92.7773 64.166C92.1758 63.5143 91.875 62.6462 91.875 61.5615V60.9053C91.875 59.374 92.1667 58.1504 92.75 57.2344C93.3333 56.3184 94.1628 55.7715 95.2383 55.5938C95.9173 55.4844 96.3936 55.3363 96.667 55.1494C96.945 54.9626 97.084 54.7074 97.084 54.3838H97.7881C97.7881 54.7666 97.7083 55.0833 97.5488 55.334C97.3893 55.5846 97.1501 55.7874 96.8311 55.9424C96.512 56.0928 96.0244 56.2204 95.3682 56.3252C94.6162 56.4437 94.0101 56.765 93.5498 57.2891C93.0941 57.8086 92.7979 58.5059 92.6611 59.3809C92.9528 58.998 93.3174 58.6882 93.7549 58.4512C94.1969 58.2142 94.6982 58.0957 95.2588 58.0957ZM92.6953 61.459V61.6299C92.6953 62.4639 92.9209 63.1429 93.3721 63.667C93.8232 64.1865 94.4157 64.4463 95.1494 64.4463C95.8877 64.4463 96.4801 64.1842 96.9268 63.6602C97.3734 63.1315 97.5967 62.4388 97.5967 61.582V61.4043C97.5967 60.6341 97.3688 60.0052 96.9131 59.5176C96.4619 59.0299 95.8695 58.7861 95.1357 58.7861C94.402 58.7861 93.8118 59.0345 93.3652 59.5312C92.9186 60.0234 92.6953 60.666 92.6953 61.459ZM105.677 57.6035V65H104.856V58.3076H101.828L101.698 61.0762C101.644 62.1016 101.541 62.8854 101.391 63.4277C101.24 63.9655 101.017 64.362 100.721 64.6172C100.424 64.8724 100.03 65 99.5381 65H99.2236V64.2754L99.4766 64.2617C99.946 64.2526 100.283 64.0247 100.488 63.5781C100.693 63.1315 100.828 62.334 100.892 61.1855L101.042 57.6035H105.677ZM107.427 61.1924C107.427 60.4814 107.563 59.8411 107.837 59.2715C108.115 58.7018 108.505 58.2598 109.006 57.9453C109.512 57.6263 110.084 57.4668 110.722 57.4668C111.706 57.4668 112.504 57.8132 113.114 58.5059C113.725 59.194 114.03 60.1077 114.03 61.2471V61.418C114.03 62.1335 113.891 62.7783 113.613 63.3525C113.34 63.9222 112.952 64.362 112.451 64.6719C111.95 64.9818 111.378 65.1367 110.735 65.1367C109.756 65.1367 108.958 64.7926 108.343 64.1045C107.732 63.4118 107.427 62.4958 107.427 61.3564V61.1924ZM108.247 61.418C108.247 62.3021 108.475 63.029 108.931 63.5986C109.391 64.1637 109.993 64.4463 110.735 64.4463C111.474 64.4463 112.071 64.1637 112.526 63.5986C112.987 63.029 113.217 62.2793 113.217 61.3496V61.1924C113.217 60.6273 113.112 60.11 112.902 59.6406C112.693 59.1712 112.399 58.8089 112.021 58.5537C111.642 58.2939 111.209 58.1641 110.722 58.1641C109.993 58.1641 109.398 58.4512 108.938 59.0254C108.477 59.5951 108.247 60.3424 108.247 61.2676V61.418ZM117.735 61.6094H116.601V65H115.773V57.6035H116.601V60.8848H117.722L120.436 57.6035H121.468L118.433 61.1924L121.803 65H120.723L117.735 61.6094Z"
                fill="black"
              />
              <path
                d="M67.4336 31.2188H59.6875L57.9297 36H56.418L62.875 18.9375H64.2461L70.7031 36H69.2031L67.4336 31.2188ZM60.1328 29.9883H66.9766L63.5547 20.6953L60.1328 29.9883ZM80.8984 36C80.7578 35.6016 80.668 35.0117 80.6289 34.2305C80.1367 34.8711 79.5078 35.3672 78.7422 35.7188C77.9844 36.0625 77.1797 36.2344 76.3281 36.2344C75.1094 36.2344 74.1211 35.8945 73.3633 35.2148C72.6133 34.5352 72.2383 33.6758 72.2383 32.6367C72.2383 31.4023 72.75 30.4258 73.7734 29.707C74.8047 28.9883 76.2383 28.6289 78.0742 28.6289H80.6172V27.1875C80.6172 26.2812 80.3359 25.5703 79.7734 25.0547C79.2188 24.5312 78.4062 24.2695 77.3359 24.2695C76.3594 24.2695 75.5508 24.5195 74.9102 25.0195C74.2695 25.5195 73.9492 26.1211 73.9492 26.8242L72.543 26.8125C72.543 25.8047 73.0117 24.9336 73.9492 24.1992C74.8867 23.457 76.0391 23.0859 77.4062 23.0859C78.8203 23.0859 79.9336 23.4414 80.7461 24.1523C81.5664 24.8555 81.9883 25.8398 82.0117 27.1055V33.1055C82.0117 34.332 82.1406 35.25 82.3984 35.8594V36H80.8984ZM76.4922 34.9922C77.4297 34.9922 78.2656 34.7656 79 34.3125C79.7422 33.8594 80.2812 33.2539 80.6172 32.4961V29.707H78.1094C76.7109 29.7227 75.6172 29.9805 74.8281 30.4805C74.0391 30.9727 73.6445 31.6523 73.6445 32.5195C73.6445 33.2305 73.9062 33.8203 74.4297 34.2891C74.9609 34.7578 75.6484 34.9922 76.4922 34.9922Z"
                fill="black"
              />
            </SvgIcon>
          </AddWidgetModalButtonStyled>
        </>
      )
    }, [buttonState, other])
  }
